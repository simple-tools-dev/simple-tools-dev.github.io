<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Simple Tools Dev â€“ Web tools & small hobby projects (currency, PDF, games)</title>
  <meta name="description" content="Simple Tools Dev: a collection of small web tools and hobby projects. Currency & Riksbank exchange rates, PDF utilities, spin-the-wheel, and Minesweeper." />

  <meta name="google-site-verification" content="Wklak2Xi8p59W9jPQRZIWTaiF5rOwp9YMxZtNHG4n0k" />
  <!-- SEO helpers -->
  <link rel="canonical" href="https://simple-tools-dev.github.io/" />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Simple Tools Dev" />
  <meta property="og:title" content="Simple Tools Dev â€“ Web tools & small hobby projects" />
  <meta property="og:description" content="Currency & Riksbank exchange rates, PDF utilities, spin-the-wheel, and Minesweeper." />
  <meta property="og:url" content="https://simple-tools-dev.github.io/" />
  <!-- If you add a social image later, uncomment:
  <meta property="og:image" content="https://simple-tools-dev.github.io/og-image.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  -->

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Simple Tools Dev" />
  <meta name="twitter:description" content="Small web tools & hobby projects: currency, PDF utilities, spin-the-wheel, and Minesweeper." />
  <!-- <meta name="twitter:image" content="https://simple-tools-dev.github.io/og-image.png" /> -->

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Simple Tools Dev",
    "url": "https://simple-tools-dev.github.io/",
    "description": "A collection of small web tools and hobby projects.",
    "inLanguage": ["en","sv"],
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://simple-tools-dev.github.io/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <!-- GoatCounter -->
  <script data-goatcounter="https://simple-tools-dev.goatcounter.com/count"
          async src="//gc.zgo.at/count.js"></script>

  <style>
    :root{
      --bg: #0b0f14;
      --bg2: #0e1520;
      --card: rgba(255,255,255,0.06);
      --card2: rgba(255,255,255,0.08);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.70);
      --border: rgba(255,255,255,0.10);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --accent: #6ee7ff;
      --accent2: #a78bfa;
      --good: #34d399;
      --warn: #fbbf24;
      --btn: rgba(255,255,255,0.10);
      --btnHover: rgba(255,255,255,0.14);
      --focus: rgba(110,231,255,0.25);
    }

    :root[data-theme="light"]{
      --bg: #f7f7fb;
      --bg2: #ffffff;
      --card: rgba(0,0,0,0.04);
      --card2: rgba(0,0,0,0.06);
      --text: rgba(0,0,0,0.88);
      --muted: rgba(0,0,0,0.60);
      --border: rgba(0,0,0,0.10);
      --shadow: 0 10px 30px rgba(0,0,0,0.12);
      --accent: #0ea5e9;
      --accent2: #7c3aed;
      --btn: rgba(0,0,0,0.06);
      --btnHover: rgba(0,0,0,0.09);
      --focus: rgba(14,165,233,0.18);
    }

    *{ box-sizing: border-box; }
    body{
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(110,231,255,0.20), transparent 55%),
        radial-gradient(900px 600px at 90% 0%, rgba(167,139,250,0.18), transparent 50%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      min-height: 100vh;
    }

    a{ color: inherit; text-decoration: none; }
    .wrap{ max-width: 1080px; margin: 0 auto; padding: 28px 18px 50px; }

    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px;
      margin-bottom: 18px;
    }
    .brand{
      display:flex; align-items:center; gap: 10px;
      font-weight: 700;
      letter-spacing: 0.2px;
    }
    .logo{
      width: 34px; height: 34px;
      border-radius: 12px;
      background:
        radial-gradient(16px 16px at 30% 30%, rgba(110,231,255,0.9), transparent 60%),
        radial-gradient(18px 18px at 70% 30%, rgba(167,139,250,0.8), transparent 65%),
        radial-gradient(20px 20px at 50% 80%, rgba(52,211,153,0.65), transparent 65%),
        rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }
    .top-actions{ display:flex; gap: 10px; align-items:center; flex-wrap: wrap; }

    .chip{
      display:inline-flex; align-items:center; gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.04);
      font-size: 13px;
      color: var(--muted);
    }
    .btn{
      display:inline-flex; align-items:center; gap: 8px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--btn);
      color: var(--text);
      cursor: pointer;
      user-select: none;
      transition: transform .08s ease, background .15s ease, border-color .15s ease;
      font-size: 14px;
    }
    .btn:hover{ background: var(--btnHover); }
    .btn:active{ transform: translateY(1px); }
    .btn:focus{ outline: none; box-shadow: 0 0 0 4px var(--focus); }

    .hero{
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border-radius: 18px;
      padding: 20px;
      box-shadow: var(--shadow);
      overflow:hidden;
      position: relative;
      margin-bottom: 18px;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(500px 240px at 20% 0%, rgba(110,231,255,0.22), transparent 65%),
        radial-gradient(500px 240px at 80% 20%, rgba(167,139,250,0.20), transparent 65%);
      pointer-events:none;
    }
    .hero-inner{ position: relative; display:grid; gap: 10px; }
    .title{
      font-size: clamp(24px, 3.5vw, 36px);
      line-height: 1.1;
      margin: 0;
      letter-spacing: -0.5px;
    }
    .subtitle{
      margin: 0;
      color: var(--muted);
      max-width: 68ch;
      font-size: 15px;
    }
    .hero-actions{ display:flex; gap: 10px; flex-wrap: wrap; margin-top: 6px; }

    .primary{
      background: linear-gradient(90deg, rgba(110,231,255,0.22), rgba(167,139,250,0.18));
      border-color: rgba(255,255,255,0.16);
    }

    .controls{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin: 16px 0 10px;
    }
    @media(min-width: 840px){
      .controls{ grid-template-columns: 1.3fr 0.7fr; }
    }

    .search{
      display:flex; align-items:center; gap: 10px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.04);
    }
    .search input{
      width: 100%;
      border: none;
      outline: none;
      background: transparent;
      color: var(--text);
      font-size: 15px;
    }
    .search input::placeholder{ color: rgba(255,255,255,0.45); }
    :root[data-theme="light"] .search input::placeholder{ color: rgba(0,0,0,0.40); }

    .filters{
      display:flex; gap: 8px; flex-wrap: wrap; align-items:center;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.04);
    }
    .tag{
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.03);
      cursor: pointer;
      font-size: 13px;
      color: var(--muted);
      transition: background .15s ease, transform .08s ease;
    }
    .tag:hover{ background: rgba(255,255,255,0.06); }
    .tag:active{ transform: translateY(1px); }
    .tag.active{
      color: var(--text);
      border-color: rgba(110,231,255,0.35);
      background: rgba(110,231,255,0.12);
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
      margin-top: 10px;
    }
    @media(min-width: 760px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }

    .card{
      border: 1px solid var(--border);
      background: linear-gradient(180deg, var(--card), var(--card2));
      border-radius: 16px;
      padding: 16px;
      box-shadow: var(--shadow);
      transition: transform .10s ease, border-color .15s ease;
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(6px);
      animation: pop .35s ease forwards;
    }
    @keyframes pop{ to { opacity: 1; transform: translateY(0); } }
    .card:hover{ transform: translateY(-2px); border-color: rgba(110,231,255,0.25); }

    .card-top{
      display:flex; justify-content:space-between; gap: 10px; align-items:flex-start;
      margin-bottom: 8px;
    }
    .card h2{ margin: 0; font-size: 18px; letter-spacing: -0.2px; }
    .desc{ margin: 0; color: var(--muted); font-size: 14px; line-height: 1.5; }

    .badges{ display:flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
    .badge{
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
      background: rgba(255,255,255,0.03);
    }
    .badge.good{ border-color: rgba(52,211,153,0.35); background: rgba(52,211,153,0.10); color: var(--text); }
    .badge.warn{ border-color: rgba(251,191,36,0.35); background: rgba(251,191,36,0.10); color: var(--text); }

    .card-actions{
      display:flex; gap: 10px; flex-wrap: wrap; align-items:center;
      margin-top: 14px;
    }
    .mini{
      padding: 9px 11px;
      border-radius: 12px;
      font-size: 14px;
    }

    .footer{
      margin-top: 22px;
      color: var(--muted);
      font-size: 13px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      opacity: 0.92;
    }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

    .dot{
      width: 9px; height: 9px; border-radius: 999px;
      background: var(--good);
      box-shadow: 0 0 0 4px rgba(52,211,153,0.15);
      flex: 0 0 auto;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="brand" title="Simple Tools Dev">
        <div class="logo" aria-hidden="true"></div>
        <div>Simple Tools Dev</div>
        <span class="chip"><span class="dot"></span> live</span>
      </div>

      <div class="top-actions">
        <button class="btn" id="langBtn" type="button" aria-label="Switch language">
          <span id="langIcon">ðŸ‡¬ðŸ‡§</span>
          <span id="langText">English</span>
        </button>

        <button class="btn" id="themeBtn" type="button" aria-label="Toggle theme">
          <span id="themeIcon">ðŸŒ™</span>
          <span id="themeText">Dark</span>
        </button>
      </div>
    </div>

    <section class="hero">
      <div class="hero-inner">
        <h1 class="title" id="heroTitle">Small tools. Fast results. No accounts.</h1>
        <p class="subtitle" id="heroSubtitle">
          A collection of web-based utilities built as hobby projects. Focus: simplicity, clarity, and quick access to useful data.
        </p>
        <div class="hero-actions">
          <button class="btn" type="button" id="copyLinkBtn">Copy page link</button>
        </div>
      </div>
    </section>

    <div class="controls">
      <div class="search">
        <span aria-hidden="true">ðŸ”Ž</span>
        <input id="q" type="text" placeholder="Search tools (e.g. currency, riksbank, pdf)..." autocomplete="off" />
      </div>

      <div class="filters" id="filters">
        <button class="tag active" data-tag="all" type="button">All</button>
        <button class="tag" data-tag="economy" type="button">Economy</button>
        <button class="tag" data-tag="api" type="button">API</button>
        <button class="tag" data-tag="export" type="button">Export</button>
        <button class="tag" data-tag="pdf" type="button">PDF</button>
        <button class="tag" data-tag="images" type="button">Images</button>
        <button class="tag" data-tag="desktop" type="button">Desktop</button>
        <button class="tag" data-tag="games" type="button">Game</button>
        <button class="tag" data-tag="web" type="button">Web</button>
      </div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="footer">
      <div>
        <span class="mono">simple-tools-dev</span> â€¢ <span id="footerText">built with GitHub Pages</span>
      </div>
    </div>

  </div>

<script>
(() => {
  // ====== PDFMerger ======
  const PDFMERGER_OWNER = "simple-tools-dev";
  const PDFMERGER_REPO = "pdfmerger"; // change to "PDFMerger" if your repo uses that casing

  const PDFMERGER_EXE_NAME = "PDFMerger-Setup-1.00.exe";
  const PDFMERGER_ZIP_NAME = "PDFMerger-Setup-1.00.zip";

  const PDFMERGER_LATEST_RELEASE_PAGE = `https://github.com/${PDFMERGER_OWNER}/${PDFMERGER_REPO}/releases/latest`;
  const PDFMERGER_API_LATEST = `https://api.github.com/repos/${PDFMERGER_OWNER}/${PDFMERGER_REPO}/releases/latest`;

  const PDFMERGER_EXE_LATEST_DOWNLOAD = `https://github.com/${PDFMERGER_OWNER}/${PDFMERGER_REPO}/releases/latest/download/${encodeURIComponent(PDFMERGER_EXE_NAME)}`;
  const PDFMERGER_ZIP_LATEST_DOWNLOAD = `https://github.com/${PDFMERGER_OWNER}/${PDFMERGER_REPO}/releases/latest/download/${encodeURIComponent(PDFMERGER_ZIP_NAME)}`;

  let pdfmergerDownloadLinks = { exe: PDFMERGER_EXE_LATEST_DOWNLOAD, zip: PDFMERGER_ZIP_LATEST_DOWNLOAD };
  let pdfmergerTotalDownloads = null;
  let pdfmergerDownloadNote = null;

  // ====== DuplicateImageFinder (handled same way as PDFMerger: fixed /download/<filename>) ======
  const DIF_OWNER = "simple-tools-dev";
  const DIF_REPO  = "duplicateimagefinder";
  const DIF_TAG   = "v.1.0.0";

  const DIF_RELEASE_PAGE = `https://github.com/${DIF_OWNER}/${DIF_REPO}/releases/tag/${encodeURIComponent(DIF_TAG)}`;
  const DIF_API_BY_TAG   = `https://api.github.com/repos/${DIF_OWNER}/${DIF_REPO}/releases/tags/${encodeURIComponent(DIF_TAG)}`;

  // Filenames must match exactly (as you provided)
  const DIF_EXE_NAME = "DuplicateImageFinder_Setup_1.0.0.exe";
  const DIF_ZIP_NAME = "DuplicateImageFinder_Setup_1.0.0.zip";

  // Direct download URLs (instant download behavior)
  const DIF_EXE_DOWNLOAD = `https://github.com/${DIF_OWNER}/${DIF_REPO}/releases/download/${encodeURIComponent(DIF_TAG)}/${encodeURIComponent(DIF_EXE_NAME)}`;
  const DIF_ZIP_DOWNLOAD = `https://github.com/${DIF_OWNER}/${DIF_REPO}/releases/download/${encodeURIComponent(DIF_TAG)}/${encodeURIComponent(DIF_ZIP_NAME)}`;

  // Same pattern as PDFMerger: links always point directly to the asset (never release page)
  let difDownloadLinks = { exe: DIF_EXE_DOWNLOAD, zip: DIF_ZIP_DOWNLOAD };
  let difTotalDownloads = null;
  let difDownloadNote = null;

  const I18N = {
    en: {
      langLabel: "English", langIcon: "ðŸ‡¬ðŸ‡§",
      themeDark: "Dark", themeLight: "Light",
      heroTitle: "Small tools. Fast results. No accounts.",
      heroSubtitle: "A collection of web-based utilities built as hobby projects. Focus: simplicity, clarity, and quick access to useful data.",
      heroPrimary: "Open currency tool",
      copyPage: "Copy page link",
      searchPlaceholder: "Search tools (e.g. currency, riksbank, pdf)...",
      tags: {
        all: "All", economy: "Economy", api: "API", export: "Export", pdf: "PDF",
        images: "Images", desktop: "Desktop", games: "Game", web: "Web"
      },
      cardOpen: "Open",
      cardCopy: "Copy link",
      copied: "Copied âœ…",
      copyFail: "Could not copy",
      noHitsTitle: "No results",
      noHitsDesc: "Try a different search term or change the filter.",
      footer: "built with GitHub Pages",
      downloadsLabel: "Downloads",
      tools: {
        riksbank: {
          title: "Riksbank â€“ Exchange rates vs SEK",
          desc: "Pick a date and view exchange rates vs SEK (source: Sveriges Riksbank). Filters to the actual rate date and supports Excel export.",
          status: "Stable",
          updated: "Updated: recently"
        },
        spinthewheel: {
          title: "Spin-the-wheel â€“ Pick a winner or make groups",
          desc: "Spin a wheel to randomly pick a winner or create groups. Handy for classrooms, giveaways, and quick team splits.",
          status: "Stable",
          updated: "Updated: recently"
        },
        minesweeper: {
          title: "Minesweeper - Classic Online",
          desc: "Play classic Minesweeper with custom board size, chording and dark/light theme. Includes Swedish and English.",
          status: "Stable",
          updated: "Play now"
        },
        shift4: {
          title: "Shift-4",
          desc: "Orbito-style 4-in-a-row on a 4Ã—4 board: optionally nudge one opponent ball, place your ball, then Shift to rotate the inner and outer rings. Play vs AI or a friend, with dark/light theme and custom colors.",
          status: "Stable",
          updated: "Play now"
        },
        snake: {
          title: "Snake",
          desc: "A classic Snake game: steer the snake, collect food to grow, and avoid crashing into walls or yourself as the pace ramps up.",
          status: "Stable",
          updated: "Play now"
        },
        pdfmerger: {
          title: "PDFMerger â€“ Merge & Compress PDFs",
          desc: "A simple desktop tool to merge multiple PDF files and compress them into a smaller output file.",
          status: "Stable",
          updated: "Latest release",
          downloadZip: "Download ZIP",
          downloadExe: "Download EXE",
          releasePage: "Release page"
        },
        duplicateimagefinder: {
          title: "DuplicateImageFinder â€“ Find duplicate images",
          desc: "Desktop tool that scans folders and detects duplicate using perceptual hashing. Useful for cleaning up large photo libraries.",
          status: "Stable",
          updated: "Latest release",
          downloadZip: "Download ZIP",
          downloadExe: "Download EXE",
          releasePage: "Release page"
        }
      }
    },
    sv: {
      langLabel: "Svenska", langIcon: "ðŸ‡¸ðŸ‡ª",
      themeDark: "MÃ¶rkt", themeLight: "Ljust",
      heroTitle: "SmÃ¥ verktyg. Snabb nytta. Inga konton.",
      heroSubtitle: "En samling webbaserade utilities byggda som hobbyprojekt. Fokus: enkelhet, tydlighet och att det ska gÃ¥ snabbt att fÃ¥ ut data.",
      heroPrimary: "Ã–ppna valutaverktyget",
      copyPage: "Kopiera lÃ¤nk till sidan",
      searchPlaceholder: "SÃ¶k verktyg (t.ex. valuta, riksbanken, pdf)...",
      tags: {
        all: "Alla", economy: "Ekonomi", api: "API", export: "Export", pdf: "PDF",
        images: "Bilder", desktop: "Desktop", games: "Spel", web: "Webb"
      },
      cardOpen: "Ã–ppna",
      cardCopy: "Kopiera lÃ¤nk",
      copied: "Kopierad âœ…",
      copyFail: "Kunde inte kopiera",
      noHitsTitle: "Inga trÃ¤ffar",
      noHitsDesc: "Prova ett annat sÃ¶kord eller byt filter.",
      footer: "byggt med GitHub Pages",
      downloadsLabel: "Nedladdningar",
      tools: {
        riksbank: {
          title: "Riksbanken â€“ Valutakurser mot SEK",
          desc: "VÃ¤lj ett datum och se valutakurser mot SEK (kÃ¤lla: Sveriges Riksbank). Filtrerar till faktiskt valutadatum och kan exportera till Excel.",
          status: "Stabil",
          updated: "Senast: nyss"
        },
        spinthewheel: {
          title: "Spin-the-wheel â€“ Dra en vinnare eller gÃ¶r grupper",
          desc: "Snurra ett hjul fÃ¶r att slumpa fram en vinnare eller skapa grupper. Perfekt fÃ¶r klassrum, utlottningar och snabb gruppindelning.",
          status: "Stabil",
          updated: "Senast: nyss"
        },
        minesweeper: {
          title: "Minesweeper - Classic Online",
          desc: "Spela klassisk Minesweeper med egen storlek, chording och mÃ¶rkt/ljust tema. Svenska och engelska.",
          status: "Stabil",
          updated: "Spela nu"
        },
        shift4: {
          title: "Shift-4",
          desc: "Ett modernt 4-i-rad (Orbito-stil) pÃ¥ 4Ã—4: valfritt flytta en motstÃ¥ndarkula ett steg, placera din kula, och tryck Shift fÃ¶r att rotera bÃ¥de inner- och ytterringen. Spela mot AI eller lokalt, med mÃ¶rkt/ljust tema och valbara fÃ¤rger.",
          status: "Stabil",
          updated: "Spela nu"
        },
        snake: {
          title: "Snake",
          desc: "Ett klassiskt Snake-spel: styr ormen, Ã¤t mat fÃ¶r att vÃ¤xa, och undvik att krocka med vÃ¤ggar eller dig sjÃ¤lv nÃ¤r tempot Ã¶kar.",
          status: "Stabil",
          updated: "Spela nu"
        },
        pdfmerger: {
          title: "PDFMerger â€“ SlÃ¥ ihop & komprimera PDF",
          desc: "Ett enkelt desktop-verktyg som kan slÃ¥ ihop flera PDF-filer och komprimera dem till en mindre utdatafil.",
          status: "Stabil",
          updated: "Senaste release",
          downloadZip: "Ladda ner ZIP",
          downloadExe: "Ladda ner EXE",
          releasePage: "Release-sida"
        },
        duplicateimagefinder: {
          title: "DuplicateImageFinder â€“ Hitta dubletter av bilder",
          desc: "Desktop-verktyg som skannar mappar och hittar dubletter med perceptuell hashing. Bra fÃ¶r att rensa stora bildbibliotek.",
          status: "Stabil",
          updated: "Senaste release",
          downloadZip: "Ladda ner ZIP",
          downloadExe: "Ladda ner EXE",
          releasePage: "Release-sida"
        }
      }
    }
  };

  // Shuffle helper (Fisherâ€“Yates). Called once on load so the top cards vary.
  function shuffleInPlace(arr){
    for(let i = arr.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  let tools = [
    {
      key: "riksbank",
      url: "https://simple-tools-dev.github.io/riksbanken-valutakurser/",
      tags: ["economy", "api", "export"],
      statusKind: "good",
      actions: () => ([
        { type: "open", url: "https://simple-tools-dev.github.io/riksbanken-valutakurser/" }
      ])
    },
    {
      key: "spinthewheel",
      url: "https://simple-tools-dev.github.io/spin-the-wheel/",
      tags: ["export"],
      statusKind: "good",
      actions: () => ([
        { type: "open", url: "https://simple-tools-dev.github.io/spin-the-wheel/" }
      ])
    },
    {
      key: "minesweeper",
      url: "https://simple-tools-dev.github.io/minesweeper/",
      tags: ["games", "web"],
      statusKind: "good",
      actions: () => ([
        { type: "open", url: "https://simple-tools-dev.github.io/minesweeper/" }
      ])
    },
    {
      key: "shift4",
      url: "https://simple-tools-dev.github.io/shift-4/",
      tags: ["games", "web"],
      statusKind: "good",
      actions: () => ([
        { type: "open", url: "https://simple-tools-dev.github.io/shift-4/" }
      ])
    },
    {
      key: "snake",
      url: "https://simple-tools-dev.github.io/snake/",
      tags: ["games", "web"],
      statusKind: "good",
      actions: () => ([
        { type: "open", url: "https://simple-tools-dev.github.io/snake/" }
      ])
    },
    {
      key: "pdfmerger",
      url: PDFMERGER_LATEST_RELEASE_PAGE,
      tags: ["pdf", "desktop"],
      statusKind: "good",
      actions: () => ([
        { type: "link", url: pdfmergerDownloadLinks.zip, actionKey: "downloadZip", primary: true, track: "pdfmerger-zip" },
        { type: "link", url: pdfmergerDownloadLinks.exe, actionKey: "downloadExe", track: "pdfmerger-exe" },
        { type: "link", url: PDFMERGER_LATEST_RELEASE_PAGE, actionKey: "releasePage" }
      ])
    },
    {
      key: "duplicateimagefinder",
      url: DIF_RELEASE_PAGE,
      tags: ["images", "desktop"],
      statusKind: "good",
      actions: () => ([
        { type: "link", url: difDownloadLinks.zip, actionKey: "downloadZip", primary: true, track: "duplicateimagefinder-zip" },
        { type: "link", url: difDownloadLinks.exe, actionKey: "downloadExe", track: "duplicateimagefinder-exe" },
        { type: "link", url: DIF_RELEASE_PAGE, actionKey: "releasePage" }
      ])
    }
  ];

  // Shuffle once per page load (keeps behavior consistent during filtering/search)
  shuffleInPlace(tools);

  const grid = document.getElementById("grid");
  const q = document.getElementById("q");
  const filters = document.getElementById("filters");
  const copyLinkBtn = document.getElementById("copyLinkBtn");

  const heroTitle = document.getElementById("heroTitle");
  const heroSubtitle = document.getElementById("heroSubtitle");

  const langBtn = document.getElementById("langBtn");
  const langIcon = document.getElementById("langIcon");
  const langText = document.getElementById("langText");

  const themeBtn = document.getElementById("themeBtn");
  const themeIcon = document.getElementById("themeIcon");
  const themeText = document.getElementById("themeText");

  const footerText = document.getElementById("footerText");

  let activeTag = "all";
  let query = "";

  function escapeHtml(s){
    return String(s)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // Language
  const root = document.documentElement;
  function getLang(){ return localStorage.getItem("lang") || "en"; } // default EN
  function setLang(lang){
    localStorage.setItem("lang", lang);
    root.setAttribute("lang", lang === "sv" ? "sv" : "en");
  }

  // Theme
  function applyTheme(theme){
    root.setAttribute("data-theme", theme);
    localStorage.setItem("theme", theme);
    const lang = getLang();
    const t = I18N[lang];
    const isLight = theme === "light";
    themeIcon.textContent = isLight ? "â˜€ï¸" : "ðŸŒ™";
    themeText.textContent = isLight ? t.themeLight : t.themeDark;
  }

  function applyTranslations(){
    const lang = getLang();
    const t = I18N[lang];

    langIcon.textContent = t.langIcon;
    langText.textContent = t.langLabel;

    heroTitle.textContent = t.heroTitle;
    heroSubtitle.textContent = t.heroSubtitle;

    q.placeholder = t.searchPlaceholder;
    copyLinkBtn.textContent = t.copyPage;

    filters.querySelectorAll(".tag").forEach(btn => {
      const key = btn.dataset.tag;
      btn.textContent = t.tags[key] || btn.textContent;
    });

    footerText.textContent = t.footer;

    // Update theme text (keep current theme)
    const currentTheme = root.getAttribute("data-theme") || "dark";
    applyTheme(currentTheme);

    render();
  }

  function toolText(key){
    const lang = getLang();
    return I18N[lang].tools[key];
  }

  function formatNumber(n){
    if (typeof n !== "number") return "â€”";
    const lang = getLang();
    return n.toLocaleString(lang === "sv" ? "sv-SE" : "en-US");
  }

  function render(){
    const lang = getLang();
    const t = I18N[lang];
    const qLower = query.trim().toLowerCase();

    const filtered = tools.filter(tool => {
      const matchesTag = (activeTag === "all") || tool.tags.includes(activeTag);
      const text = toolText(tool.key);
      const hay = (text.title + " " + text.desc + " " + tool.tags.join(" ")).toLowerCase();
      const matchesQuery = !qLower || hay.includes(qLower);
      return matchesTag && matchesQuery;
    });

    grid.innerHTML = filtered.map((tool, idx) => {
      const text = toolText(tool.key);

      const badges = tool.tags
        .map(tag => `<span class="badge">${escapeHtml(t.tags[tag] || tag)}</span>`)
        .join("");

      const statusClass = tool.statusKind === "good" ? "badge good" : "badge warn";
      const statusLabel = text.status || "Info";

      let extraBadge = "";
      if (tool.key === "pdfmerger") {
        const count = pdfmergerTotalDownloads;
        const label = `${t.downloadsLabel}: ${formatNumber(count)}`;
        extraBadge = `<span class="badge">${escapeHtml(label)}</span>`;
        if (pdfmergerDownloadNote) extraBadge += `<span class="badge warn">${escapeHtml(pdfmergerDownloadNote)}</span>`;
      }
      if (tool.key === "duplicateimagefinder") {
        const count = difTotalDownloads;
        const label = `${t.downloadsLabel}: ${formatNumber(count)}`;
        extraBadge = `<span class="badge">${escapeHtml(label)}</span>`;
        if (difDownloadNote) extraBadge += `<span class="badge warn">${escapeHtml(difDownloadNote)}</span>`;
      }

      const actions = tool.actions(tool).map(a => {
        if (a.type === "open") {
          return `<a class="btn mini primary" href="${escapeHtml(a.url)}">${escapeHtml(t.cardOpen)}</a>`;
        }
        if (a.type === "link") {
          const label = text[a.actionKey] || a.actionKey;
          const cls = a.primary ? "btn mini primary" : "btn mini";
          const trackAttr = a.track ? ` data-track="${escapeHtml(a.track)}"` : "";
          return `<a class="${cls}" href="${escapeHtml(a.url)}"${trackAttr}>${escapeHtml(label)}</a>`;
        }
        return "";
      }).join("");

      return `
        <article class="card" style="animation-delay:${Math.min(idx*60, 240)}ms">
          <div class="card-top">
            <h2>${escapeHtml(text.title)}</h2>
            <span class="${statusClass}">${escapeHtml(statusLabel)}</span>
          </div>
          <p class="desc">${escapeHtml(text.desc)}</p>

          <div class="badges">
            ${badges}
            <span class="badge">${escapeHtml(text.updated || "")}</span>
            ${extraBadge}
          </div>

          <div class="card-actions">
            ${actions}
            <button class="btn mini" type="button" data-copy="${escapeHtml(tool.url)}">${escapeHtml(t.cardCopy)}</button>
          </div>
        </article>
      `;
    }).join("");

    if (filtered.length === 0) {
      grid.innerHTML = `
        <article class="card" style="opacity:1; transform:none; animation:none;">
          <h2>${escapeHtml(t.noHitsTitle)}</h2>
          <p class="desc">${escapeHtml(t.noHitsDesc)}</p>
        </article>
      `;
    }

    grid.querySelectorAll("button[data-copy]").forEach(btn => {
      btn.addEventListener("click", async () => {
        const link = btn.getAttribute("data-copy");
        try {
          await navigator.clipboard.writeText(link);
          btn.textContent = I18N[getLang()].copied;
          setTimeout(() => (btn.textContent = I18N[getLang()].cardCopy), 900);
        } catch {
          btn.textContent = I18N[getLang()].copyFail;
          setTimeout(() => (btn.textContent = I18N[getLang()].cardCopy), 900);
        }
      });
    });
  }

  q.addEventListener("input", (e) => {
    query = e.target.value || "";
    render();
  });

  filters.addEventListener("click", (e) => {
    const btn = e.target.closest(".tag");
    if (!btn) return;
    activeTag = btn.dataset.tag;
    filters.querySelectorAll(".tag").forEach(t => t.classList.remove("active"));
    btn.classList.add("active");
    render();
  });

  copyLinkBtn.addEventListener("click", async () => {
    try {
      await navigator.clipboard.writeText(location.href);
      copyLinkBtn.textContent = I18N[getLang()].copied;
      setTimeout(() => (copyLinkBtn.textContent = I18N[getLang()].copyPage), 900);
    } catch {
      copyLinkBtn.textContent = I18N[getLang()].copyFail;
      setTimeout(() => (copyLinkBtn.textContent = I18N[getLang()].copyPage), 900);
    }
  });

  langBtn.addEventListener("click", () => {
    const current = getLang();
    const next = current === "en" ? "sv" : "en";
    setLang(next);
    applyTranslations();
  });

  const savedTheme = localStorage.getItem("theme");
  const prefersLight = window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches;
  applyTheme(savedTheme || (prefersLight ? "light" : "dark"));

  themeBtn.addEventListener("click", () => {
    const current = root.getAttribute("data-theme") || "dark";
    applyTheme(current === "dark" ? "light" : "dark");
  });

  document.addEventListener("click", (e) => {
    const a = e.target.closest('a[data-track]');
    if (!a) return;

    const key = a.getAttribute("data-track");
    if (!key) return;

    if (window.goatcounter && typeof window.goatcounter.count === "function") {
      window.goatcounter.count({
        path: `download/${key}`,
        title: key
      });
    }
  });

  async function updatePdfMergerDownloads(){
    const CACHE_KEY = "pdfmerger_dl_cache_v1";
    const TTL_MS = 6 * 60 * 60 * 1000; // 6h

    try {
      const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || "null");
      if (cached && typeof cached.total === "number" && (Date.now() - cached.ts) < TTL_MS) {
        pdfmergerTotalDownloads = cached.total;
        pdfmergerDownloadLinks = cached.links || pdfmergerDownloadLinks;
        render();
        return;
      }
    } catch {}

    try {
      const res = await fetch(PDFMERGER_API_LATEST, {
        headers: { "Accept": "application/vnd.github+json" }
      });

      if (!res.ok) {
        pdfmergerDownloadNote = (getLang() === "sv")
          ? "Kan inte hÃ¤mta rÃ¤knare just nu"
          : "Counter unavailable right now";
        render();
        return;
      }

      const data = await res.json();
      const assets = Array.isArray(data.assets) ? data.assets : [];

      const exe = assets.find(a => a && a.name === PDFMERGER_EXE_NAME);
      const zip = assets.find(a => a && a.name === PDFMERGER_ZIP_NAME);

      const total = (exe?.download_count || 0) + (zip?.download_count || 0);
      pdfmergerTotalDownloads = total;

      pdfmergerDownloadLinks = {
        exe: exe?.browser_download_url || pdfmergerDownloadLinks.exe,
        zip: zip?.browser_download_url || pdfmergerDownloadLinks.zip
      };

      pdfmergerDownloadNote = null;

      try {
        localStorage.setItem(CACHE_KEY, JSON.stringify({
          ts: Date.now(),
          total,
          links: pdfmergerDownloadLinks
        }));
      } catch {}

      render();
    } catch {
      pdfmergerDownloadNote = (getLang() === "sv")
        ? "Kan inte hÃ¤mta rÃ¤knare just nu"
        : "Counter unavailable right now";
      render();
    }
  }

  async function updateDuplicateImageFinderDownloads(){
    const CACHE_KEY = "dif_dl_cache_v1";
    const TTL_MS = 6 * 60 * 60 * 1000; // 6h

    try {
      const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || "null");
      if (cached && typeof cached.total === "number" && (Date.now() - cached.ts) < TTL_MS) {
        difTotalDownloads = cached.total;
        render();
        return;
      }
    } catch {}

    try {
      const res = await fetch(DIF_API_BY_TAG, {
        headers: { "Accept": "application/vnd.github+json" }
      });

      if (!res.ok) {
        difDownloadNote = (getLang() === "sv")
          ? "Kan inte hÃ¤mta rÃ¤knare just nu"
          : "Counter unavailable right now";
        render();
        return;
      }

      const data = await res.json();
      const assets = Array.isArray(data.assets) ? data.assets : [];

      const exe = assets.find(a => a && a.name === DIF_EXE_NAME);
      const zip = assets.find(a => a && a.name === DIF_ZIP_NAME);

      difTotalDownloads = (exe?.download_count || 0) + (zip?.download_count || 0);
      difDownloadNote = null;

      try {
        localStorage.setItem(CACHE_KEY, JSON.stringify({
          ts: Date.now(),
          total: difTotalDownloads
        }));
      } catch {}

      render();
    } catch {
      difDownloadNote = (getLang() === "sv")
        ? "Kan inte hÃ¤mta rÃ¤knare just nu"
        : "Counter unavailable right now";
      render();
    }
  }

  setLang(getLang());
  applyTranslations();
  render();

  updatePdfMergerDownloads();
  updateDuplicateImageFinderDownloads();
})();
</script>
</body>
</html>
